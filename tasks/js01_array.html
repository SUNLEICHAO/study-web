<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
</head>

<body>
  <script>
    let series = [
      {
        name: 'Web',
        'courses': [
          {
            name: 'HTML',
            lessons: [
              { name: 'HTML lesson 1' },
              { name: 'HTML lesson 2' }
            ]
          }, {
            name: 'CSS',
            lessons: [
              { name: 'CSS lesson 1' },
              { name: 'CSS lesson 2' }
            ]
          }
        ]
      },
      {
        name: 'PHP',
        'courses': [
          {
            name: 'Linux',
            lessons: [
              { name: 'Linux lesson 1' }
            ]
          }
        ]
      }
    ];
    function getLessonCount(datas) {
      // 计算每个系列下有多少门课
      // 系列-课程-课时
      let res = []

      // #1 for 循环
      // 每个系列
      // for (let i = 0; i < datas.length; i++) {
      //   let sum = 0
      //   // 每个课程
      //   for (var j = 0; j < datas[i].courses.length; j++) {
      //     sum += datas[i].courses[j].lessons.length
      //   }
      //   res.push({ 'name': datas[i].name, 'count': sum })
      // }

      // #2 forEach
      // datas.forEach(function (item, index) {
      //   let sum = 0
      //   item.courses.forEach(function (item, index) {
      //     sum += item.lessons.length
      //   })
      //   res.push({ 'name': item.name, 'count': sum })
      // })

      // #3 map + reduce
      // res = datas.map(function (item, index) {
      //   let lessonNum = item.courses.map(function (item) {
      //     return item.lessons.length
      //   })
      //   return { 'name': item.name, 'count': lessonNum.reduce(function (prev, cur) { return prev + cur }, 0) }
      // })

      // #4 箭头函数
      res = datas.map(item => (
        {
          'name': item.name,
          'count': item.courses.map(item => item.lessons.length).reduce((prev, cur) => prev + cur, 0)
        }
      ))

      return res

    }

    const result = getLessonCount(series);

    console.log(result);
    // 期望结果
    // [{ name: 'Web', count: 4}, { name: 'PHP', count: 1}]
  </script>

</body>

</html>